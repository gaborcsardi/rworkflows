---
title: "rworkflows"  
author: "<img src='`r read.dcf('DESCRIPTION', fields = 'URL')[1]`/raw/master/inst/hex/hex.png' height='300'><br><br>
        `r badger::badge_github_version(color = 'black')` 
        `r badger::badge_github_actions(action = 'R-CMD-check-bioc')`
        `r badger::badge_last_commit(branch='master')`
        `r badger::badge_codecov(branch='master')` 
        `r badger::badge_license()` 
        <h4>Authors: <i>`r auths <- eval(parse(text = gsub('person','c',read.dcf('DESCRIPTION', fields = 'Authors@R'))));paste(auths[names(auths)=='given'],auths[names(auths)=='family'], collapse = ', ')`</i></h4>" 
date: "<h4>README updated: <i>`r format( Sys.Date(), '%b-%d-%Y')`</i></h4>"
output:
  github_document
---

## Intro

[GitHub Actions](https://docs.github.com/en/actions) 
are a powerful way to automatically launch workflows 
every time you push changes to a GitHub repository. 
This is a form of [Continuous Integration (CI)](https://docs.github.com/en/actions/automating-builds-and-tests/about-continuous-integration),
which helps ensure that your code is always working as expected 
(without having to manually check each time).

Here, we have designed robust and flexible workflows 
specifically for the development of R packages. 

Currently, these workflows perform the following tasks:  

1. Build a Docker container to run subsequent steps within. 
2. Build and check your R package (with CRAN and Bioconductor checks).  
3. Run units tests.  
4. Run code coverage tests and upload the results 
to [Codecov](https://about.codecov.io/).  
5. (Re)build and launch a documentation website for your R package.  
6. Push an [Rstudio](https://www.rstudio.com/) 
[Docker](https://www.docker.com/) container to 
[DockerHub](https://hub.docker.com/) 
with your package and all its dependencies pre-installed.  

Importantly, these files are designed to work with any R package out-of-the-box.
This means you won't have to manually edit any of the files provided here, 
simply copy and paste them into the appropriate folders.

## [Documentation](https://neurogenomics.github.io/rworkflows)
### [Getting started](https://neurogenomics.github.io/rworkflows/articles)
### [Docker/Singularity](https://neurogenomics.github.io/rworkflows/articles/docker)
 
## Acknowledgments

`rworkflows`` builds upon the work of many others, especially the following:

<details>
  
### `biocthis`

This workflow is derived from the workflow generated by the 
[`use_bioc_github_action()`](https://lcolladotor.github.io/biocthis/articles/biocthis.html) function within the 
[`biothis`](http://www.bioconductor.org/packages/release/bioc/html/biocthis.html) 
package. This workflow takes advantage of several key features: 

- Uses the official [`Bioconductor/bioconductor_docker`](https://github.com/Bioconductor/bioconductor_docker) Docker container
(to minimise errors due to versioning conflicts/missing dependencies).    
- Uses the package
[AnVIL](https://bioconductor.org/packages/release/bioc/html/AnVIL.html) to more
rapidly install R packages from binaries.  

However, I have modified the `bioc` workflow to make a number of improvements:  

- Uses dynamic variables to specify R/Bioconductor versions 
(e.g. `r: "latest"`) and the name of your R package, as opposed to static 
names that are likely to become outdated (e.g. `r: "4.0.1"`).  
- Additional error handling and dependencies checks.  
- Re-renders `README.Rmd` before rebuilding the documentation website. 

### `bioconductor_docker`

Uses the official 
[`bioconductor/bioconductor_docker`](https://github.com/Bioconductor/bioconductor_docker)
Docker container.  

**NOTE**: The `bioconductor/bioconductor_docker` container often lags behind the
actual Bioconductor releases. This means that sometimes "devel" in `Bioconductor/bioconductor_docker` is actually referring to the "release" 
version of Bioconductor. See this [Issue](https://github.com/Bioconductor/bioconductor_docker/issues/37) 
for details. 

#### `scFlow`

This DockerFile was partly adapted from the [scFlow Dockerfile](https://github.com/combiz/scFlow/blob/master/Dockerfile).

Unlike other Dockerfiles, this one
**does not require any manual editing when applying to different R packages**. 
This means that users who are unfamiliar with Docker do not have to troubleshoot
making this file correctly. It also means that it will continue to work 
even if your R package dependencies change. 

</details> 
 

# Session Info  

<details>

```{r}
utils::sessionInfo()
```

</details>

