rworkflows
================
<img src='https://github.com/neurogenomics/rworkflows/raw/master/inst/hex/hex.png' height='300'><br><br>
[![](https://img.shields.io/badge/devel%20version-0.99.0-black.svg)](https://github.com/neurogenomics/rworkflows)
[![R build
status](https://github.com/neurogenomics/rworkflows/workflows/R-CMD-check-bioc/badge.svg)](https://github.com/neurogenomics/rworkflows/actions)
[![](https://img.shields.io/github/last-commit/neurogenomics/rworkflows.svg)](https://github.com/neurogenomics/rworkflows/commits/master)
[![](https://app.codecov.io/gh/neurogenomics/rworkflows/branch/master/graph/badge.svg)](https://app.codecov.io/gh/neurogenomics/rworkflows)
[![License:
GPL-3](https://img.shields.io/badge/license-GPL--3-blue.svg)](https://cran.r-project.org/web/licenses/GPL-3)
<h4>
Authors: <i>Brian Schilder, Alan Murphy</i>
</h4>
<h4>
README updated: <i>Nov-07-2022</i>
</h4>

## Intro

[GitHub Actions](https://docs.github.com/en/actions) are a powerful way
to automatically launch workflows every time you push changes to a
GitHub repository. This is a form of [Continuous Integration
(CI)](https://docs.github.com/en/actions/automating-builds-and-tests/about-continuous-integration),
which helps ensure that your code is always working as expected (without
having to manually check each time).

Here, we have designed robust and flexible workflows specifically for
the development of R packages.

Currently, these workflows perform the following tasks:

1.  Build a Docker container to run subsequent steps within.
2.  Build and check your R package (with CRAN and Bioconductor
    checks).  
3.  Run units tests.  
4.  Run code coverage tests and upload the results to
    [Codecov](https://about.codecov.io/).  
5.  (Re)build and launch a documentation website for your R package.  
6.  Push an [Rstudio](https://www.rstudio.com/)
    [Docker](https://www.docker.com/) container to
    [DockerHub](https://hub.docker.com/) with your package and all its
    dependencies pre-installed.

Importantly, these files are designed to work with any R package
out-of-the-box. This means you won’t have to manually edit any of the
files provided here, simply copy and paste them into the appropriate
folders.

## [Documentation](https://neurogenomics.github.io/rworkflows)

### [Getting started](https://neurogenomics.github.io/rworkflows/articles)

### [Docker/Singularity](https://neurogenomics.github.io/rworkflows/articles/docker)

## Acknowledgments

\`rworkflows\`\` builds upon the work of many others, especially the
following:

<details>

### `biocthis`

This workflow is derived from the workflow generated by the
[`use_bioc_github_action()`](https://lcolladotor.github.io/biocthis/articles/biocthis.html)
function within the
[`biothis`](http://www.bioconductor.org/packages/release/bioc/html/biocthis.html)
package. This workflow takes advantage of several key features:

-   Uses the official
    [`Bioconductor/bioconductor_docker`](https://github.com/Bioconductor/bioconductor_docker)
    Docker container (to minimise errors due to versioning
    conflicts/missing dependencies).  
-   Uses the package
    [AnVIL](https://bioconductor.org/packages/release/bioc/html/AnVIL.html)
    to more rapidly install R packages from binaries.

However, I have modified the `bioc` workflow to make a number of
improvements:

-   Uses dynamic variables to specify R/Bioconductor versions
    (e.g. `r: "latest"`) and the name of your R package, as opposed to
    static names that are likely to become outdated
    (e.g. `r: "4.0.1"`).  
-   Additional error handling and dependencies checks.  
-   Re-renders `README.Rmd` before rebuilding the documentation website.

### `bioconductor_docker`

Uses the official
[`bioconductor/bioconductor_docker`](https://github.com/Bioconductor/bioconductor_docker)
Docker container.

**NOTE**: The `bioconductor/bioconductor_docker` container often lags
behind the actual Bioconductor releases. This means that sometimes
“devel” in `Bioconductor/bioconductor_docker` is actually referring to
the “release” version of Bioconductor. See this
[Issue](https://github.com/Bioconductor/bioconductor_docker/issues/37)
for details.

#### `scFlow`

This DockerFile was partly adapted from the [scFlow
Dockerfile](https://github.com/combiz/scFlow/blob/master/Dockerfile).

Unlike other Dockerfiles, this one **does not require any manual editing
when applying to different R packages**. This means that users who are
unfamiliar with Docker do not have to troubleshoot making this file
correctly. It also means that it will continue to work even if your R
package dependencies change.

</details>

# Session Info

<details>

``` r
utils::sessionInfo()
```

    ## R version 4.2.1 (2022-06-23)
    ## Platform: x86_64-apple-darwin17.0 (64-bit)
    ## Running under: macOS Big Sur ... 10.16
    ## 
    ## Matrix products: default
    ## BLAS:   /Library/Frameworks/R.framework/Versions/4.2/Resources/lib/libRblas.0.dylib
    ## LAPACK: /Library/Frameworks/R.framework/Versions/4.2/Resources/lib/libRlapack.dylib
    ## 
    ## locale:
    ## [1] en_GB.UTF-8/en_GB.UTF-8/en_GB.UTF-8/C/en_GB.UTF-8/en_GB.UTF-8
    ## 
    ## attached base packages:
    ## [1] stats     graphics  grDevices utils     datasets  methods   base     
    ## 
    ## loaded via a namespace (and not attached):
    ##  [1] BiocManager_1.30.18 pillar_1.8.1        compiler_4.2.1     
    ##  [4] RColorBrewer_1.1-3  yulab.utils_0.0.5   tools_4.2.1        
    ##  [7] digest_0.6.30       jsonlite_1.8.3      evaluate_0.17      
    ## [10] lifecycle_1.0.3     tibble_3.1.8        gtable_0.3.1       
    ## [13] pkgconfig_2.0.3     rlang_1.0.6         cli_3.4.1          
    ## [16] DBI_1.1.3           rstudioapi_0.14     rvcheck_0.2.1      
    ## [19] yaml_2.3.6          xfun_0.34           fastmap_1.1.0      
    ## [22] stringr_1.4.1       dplyr_1.0.10        knitr_1.40         
    ## [25] desc_1.4.2          generics_0.1.3      vctrs_0.4.2        
    ## [28] dlstats_0.1.5       rprojroot_2.0.3     grid_4.2.1         
    ## [31] tidyselect_1.2.0    glue_1.6.2          R6_2.5.1           
    ## [34] fansi_1.0.3         rmarkdown_2.17      ggplot2_3.3.6      
    ## [37] badger_0.2.1        magrittr_2.0.3      scales_1.2.1       
    ## [40] htmltools_0.5.3     assertthat_0.2.1    colorspace_2.0-3   
    ## [43] utf8_1.2.2          stringi_1.7.8       munsell_0.5.0

</details>
